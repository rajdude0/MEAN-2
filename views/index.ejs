<!DOCTYPE html>
<html>
  <head>
    <title>WeekDemo2</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
    <script src = "/javascripts/angularApp.js"></script>
      <script src="/javascripts/xeditable.min.js"></script>
      <link href="/stylesheets/xeditable.min.css" rel="stylesheet"></link>
      <style>
          .space {
             margin:0px 5px;
          }
          span.glyphicon-pencil {display:none;}
          h2:hover span.glyphicon-pencil {display:inline;}
          h3:hover span.glyphicon-pencil {display:inline;}
      </style>
  </head>
  <body ng-app='weekDemo2'>
    
      <div class="row">
        <div class="col-md-6 col-md-offset-3">
            <ui-view></ui-view>
          </div>
      </div>
      
      
      <script type="text/ng-template" id="/home.html">
      
        <div class="page-header">
                <h2>Company and Employees</h2>
        </div>
        <div ng-repeat="c in company">
          <a href="#/company/{{c._id}}"> <h3><span class="space glyphicon glyphicon-briefcase"></span>{{c.name}}<h3></a>
        </div>
        <form ng-submit="addCompany()">
         <h3>Add a new Company</h3>
         <div class="form-group"><input type="text" class="form-control" placeholder="Company Name" ng-model="name"></div>
         <button class="btn btn-primary" type="submit">Add</button>
        </form>
      </script>
      
      <script type="text/ng-template" id="/company.html">
        <div class="page-header">
        <h2><span class="space glyphicon glyphicon-briefcase"></span>{{company.name}}</h2>
        </div>
        
        <div ng-repeat="emp in company.employee_id">
          <a href="#/company/{{emp.company_id}}/employee/{{emp._id}}"><h3><span class="space glyphicon glyphicon-user"></span>{{emp.name}}</h3></a>
        </div>
        
        <form ng-submit="addEmployee()">
            <h3>Add a new Employee</h3>
            <div class="form-group"><input type="text" class="form-control" placeholder="Employee Name" ng-model="name"></div>
            <div class="form-group"><input type="text" class="form-control" placeholder="Age" ng-model="age"></div>
            <div class="form-group"><input type="text" class="form-control" placeholder="DOB" ng-model="dob"></div>
            <div class="form-group"><input type="text" class="form-control" placeholder="Address" ng-model="address"></div>
            <button class="btn btn-primary" type="submit">Add</button>
        </from>
      </script>
      
      <script type="text/ng-template" id="/employee.html">
        <div class="page-header">
       <h2> <span editable-text="employee.name" e-form="editNameForm" onbeforesave="updateEmployee()"><span class="space glyphicon glyphicon-user"></span>{{employee.name || 'empty' }}</span> <span class="space glyphicon glyphicon-pencil" style="font-size:15px" ng-click="editNameForm.$show()" ng-hide="editNameForm.$visible"></span>
       </h2>
        </div>
        
        <h5>DOB: </h5>
        <h3><span editable-text="employee.dob" e-form="editDobForm" onbeforesave="updateEmployee()">{{employee.dob}}</span> <span  class="space glyphicon glyphicon-pencil" style="font-size:15px" ng-click="editDobForm.$show()" ng-hide="editDobForm.$visible"></span></h3>
        
        
        <h5>Age: </h5>
        <h3><span editable-text="employee.age" e-form="editAgeForm" onbeforesave="updateEmployee()">{{employee.age}}</span>
        <span  class="space glyphicon glyphicon-pencil" style="font-size:15px" ng-click="editAgeForm.$show()" ng-hide="editAgeForm.$visible"></span></h3>
        
        <h5>Address:</h5>
        <h3><span editable-text="employee.address" e-form="editAddressForm" onbeforesave="updateEmployee()">{{employee.address}}</span><span  class="space glyphicon glyphicon-pencil" style="font-size:15px" ng-click="editAddressForm.$show()" ng-hide="editAddressForm.$visible"></span></h3> 
      </script>
      
  </body>
</html>
